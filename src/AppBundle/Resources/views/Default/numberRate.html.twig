{% extends '::base.html.twig' %}

{% block content %}
    {% include '@App/Default/partial/probabilities.html.twig' %}
    <canvas id="chartNumberRate" width="200" height="100"></canvas>
    <div style="text-align: center">
        <a download="exportNumberRate.png">
            Exporter le graphique en PNG
        </a>
    </div>
    <script type="text/javascript" charset="utf-8">
        $(function () {
            var $chartNumberRate = $('#chartNumberRate');

            var options = {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                },
                animation: {
                    duration: 400,
                    onComplete: function (animation) {
                        $('a', $(this.chart.canvas).next()).attr('href', this.toBase64Image());
                    }
                }
            };


            var chartBreakdownsCounts = new Chart($chartNumberRate, {
                type: 'bar',
                data: {
                    labels: [{% for number in numbersOrder %}
                        '{{ number['boule'] }}'{{ not loop.last ? ', ' }}
                        {% endfor %}],
                    datasets: [{
                        label: 'Fréquence d\'apparition des numéros',
                        data: [{% for number in numbersOrder %}
                            '{{ number['occurrence'] }}'{{ not loop.last ? ', ' }}
                            {% endfor %}],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255,99,132,1)',
                        borderWidth: 1
                    }]
                },
                options: options
            });
        });
    </script>
{% endblock %}